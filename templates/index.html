<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MarkiNote - ÊñáÊ°£ÁÆ°ÁêÜ‰∏éÈ¢ÑËßà</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- MathJaxÈÖçÁΩÆ -->
    <script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']],
            processEscapes: true,
            processEnvironments: true
        },
        options: {
            skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            ignoreHtmlClass: 'mermaid|language-mermaid'
        },
        startup: {
            pageReady: () => {
                return MathJax.startup.defaultPageReady();
            }
        }
    };
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- ‰æßËæπÊ†è - Library -->
        <aside class="library-panel">
            <div class="library-header">
                <h2>
                    <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor" style="vertical-align: text-bottom; margin-right: 6px;">
                        <path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"/>
                    </svg>
                    Library
                </h2>
                <div class="library-actions">
                    <button id="searchBtn" class="btn btn-secondary" title="ÊêúÁ¥¢Êñá‰ª∂">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                        </svg>
                    </button>
                    <button id="themeToggleBtn" class="btn btn-secondary" title="ÂàáÊç¢‰∏ªÈ¢ò">
                        <svg id="moonIcon" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
                        </svg>
                        <svg id="sunIcon" width="16" height="16" viewBox="0 0 16 16" fill="currentColor" style="display: none;">
                            <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278zM4.858 1.311A7.269 7.269 0 0 0 1.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.316 7.316 0 0 0 5.205-2.162c-.337.042-.68.063-1.029.063-4.61 0-8.343-3.714-8.343-8.29 0-1.167.242-2.278.681-3.286z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- ÊêúÁ¥¢Ê†è -->
            <div class="search-bar" id="searchBar" style="display: none;">
                <input type="text" id="searchInput" placeholder="ÊêúÁ¥¢Êñá‰ª∂..." class="search-input">
                <button class="search-close-btn" onclick="closeSearch()">
                    <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
                    </svg>
                </button>
            </div>
            
            <!-- Èù¢ÂåÖÂ±ëÂØºËà™ -->
            <div class="breadcrumb" id="breadcrumb">
                <span class="breadcrumb-item active" data-path="">Ê†πÁõÆÂΩï</span>
            </div>
            
            <!-- Êñá‰ª∂ÂàóË°® -->
            <div class="file-list" id="fileList">
                <div class="loading">Âä†ËΩΩ‰∏≠...</div>
            </div>
            
            <!-- Â∫ïÈÉ®Êìç‰ΩúÊåâÈíÆ -->
            <div class="library-footer">
                <button id="uploadBtn" class="btn btn-secondary footer-btn icon-btn-round" title="‰∏ä‰º†Êñá‰ª∂ÊàñÊñá‰ª∂Â§π">
                    <svg width="22" height="22" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                        <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
                    </svg>
                </button>
                <button id="newBtn" class="btn btn-primary footer-btn icon-btn-round" title="Êñ∞Âª∫Êñá‰ª∂ÊàñÊñá‰ª∂Â§π">
                    <svg width="24" height="24" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                    </svg>
                </button>
            </div>
        </aside>

        <!-- ‰∏ªÂÜÖÂÆπÂå∫ - È¢ÑËßà -->
        <main class="preview-panel">
            <div class="preview-header">
                <div class="preview-title">
                    <h2 id="previewTitle">ÈÄâÊã©Êñá‰ª∂‰ª•È¢ÑËßà</h2>
                    <span class="file-path" id="currentFilePath"></span>
                </div>
                <div class="preview-actions">
                    <button id="viewSourceBtn" class="btn btn-secondary" disabled>
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M5.854 4.854a.5.5 0 1 0-.708-.708l-3.5 3.5a.5.5 0 0 0 0 .708l3.5 3.5a.5.5 0 0 0 .708-.708L2.707 8l3.147-3.146zm4.292 0a.5.5 0 0 1 .708-.708l3.5 3.5a.5.5 0 0 1 0 .708l-3.5 3.5a.5.5 0 0 1-.708-.708L13.293 8l-3.147-3.146z"/>
                        </svg>
                        Êü•ÁúãÊ∫ê‰ª£Á†Å
                    </button>
                </div>
            </div>
            
            <div class="preview-content" id="previewContent">
                <div class="welcome-message">
                    <svg width="64" height="64" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"/>
                    </svg>
                    <h3>Ê¨¢Ëøé‰ΩøÁî® MarkiNote</h3>
                    <p>‰ªéÂ∑¶‰æßÈÄâÊã©‰∏Ä‰∏™Êñá‰ª∂ÂºÄÂßãÈ¢ÑËßà</p>
                    <p class="tip">üí° ÊîØÊåÅ .md„ÄÅ.markdown„ÄÅ.txt Ê†ºÂºèÊñá‰ª∂</p>
                </div>
            </div>
        </main>
    </div>

    <!-- ÈöêËóèÁöÑÊñá‰ª∂‰∏ä‰º†ËæìÂÖ•Ê°Ü - Êô∫ËÉΩÊîØÊåÅÊñá‰ª∂ÂíåÊñá‰ª∂Â§π -->
    <input type="file" id="fileInput" style="display: none;" multiple>

    <!-- Ê®°ÊÄÅÊ°Ü - ‰∏ä‰º†ÈÄâÊã© -->
    <div id="uploadModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ÈÄâÊã©‰∏ä‰º†ÊñπÂºè</h3>
                <button class="close-btn" onclick="closeUploadModal()">&times;</button>
            </div>
            <div class="modal-body upload-options">
                <button class="upload-option-btn" onclick="selectUploadType('file')">
                    <svg width="48" height="48" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"/>
                    </svg>
                    <span>‰∏ä‰º†Êñá‰ª∂</span>
                </button>
                <button class="upload-option-btn" onclick="selectUploadType('folder')">
                    <svg width="48" height="48" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M.54 3.87L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31z"/>
                    </svg>
                    <span>‰∏ä‰º†Êñá‰ª∂Â§π</span>
                </button>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeUploadModal()">ÂèñÊ∂à</button>
            </div>
        </div>
    </div>

    <!-- Ê®°ÊÄÅÊ°Ü - Êü•Áúã/ÁºñËæëÊ∫ê‰ª£Á†Å -->
    <div id="sourceModal" class="modal">
        <div class="modal-content source-modal-content" style="max-width: 90vw; width: 1000px;">
            <div class="modal-header">
                <h3 id="sourceModalTitle">Ê∫ê‰ª£Á†Å</h3>
                <button class="close-btn" id="sourceCloseBtn" onclick="closeSourceModal()">&times;</button>
            </div>
            <div class="modal-body">
                <pre id="sourceContent" style="background: var(--code-bg); padding: 20px; border-radius: 6px; max-height: 70vh; overflow: auto; margin: 0; font-family: 'Consolas', 'Monaco', monospace; font-size: 0.9em; color: var(--text-color);"><code></code></pre>
                <textarea id="sourceEditor" style="display: none; width: 100%; height: 70vh; padding: 20px; border: 1px solid var(--border-color); border-radius: 6px; font-family: 'Consolas', 'Monaco', monospace; font-size: 0.9em; resize: vertical; background: var(--code-bg); color: var(--text-color);"></textarea>
            </div>
            <div class="modal-footer source-modal-footer">
                <div id="sourceViewActions" class="source-actions-group">
                    <button class="btn btn-secondary" onclick="editSourceCode()" title="ÁºñËæëÊ∫ê‰ª£Á†Å">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
                        </svg>
                        ÁºñËæë
                    </button>
                    <button class="btn btn-primary" onclick="copySourceCode()" title="Â§çÂà∂Ê∫ê‰ª£Á†Å">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                            <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
                        </svg>
                        Â§çÂà∂
                    </button>
                </div>
                <div id="sourceEditActions" class="source-actions-group" style="display: none;">
                    <button class="btn btn-secondary" onclick="cancelEditSourceCode()">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
                        </svg>
                        ÂèñÊ∂à
                    </button>
                    <button class="btn btn-primary" onclick="saveSourceCode()">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M2 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9.5a1 1 0 0 0-1 1v7.293l2.646-2.647a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L7.5 9.293V2a2 2 0 0 1 2-2H14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h2.5a.5.5 0 0 1 0 1H2z"/>
                        </svg>
                        ‰øùÂ≠ò
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ê®°ÊÄÅÊ°Ü - ÈÄâÊã©Êñ∞Âª∫Á±ªÂûã -->
    <div id="newSelectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ÈÄâÊã©Êñ∞Âª∫Á±ªÂûã</h3>
                <button class="close-btn" onclick="closeNewSelectModal()">&times;</button>
            </div>
            <div class="modal-body upload-options">
                <button class="upload-option-btn" onclick="selectNewType('file')">
                    <svg width="48" height="48" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"/>
                    </svg>
                    <span>Êñ∞Âª∫Êñá‰ª∂</span>
                </button>
                <button class="upload-option-btn" onclick="selectNewType('folder')">
                    <svg width="48" height="48" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M1 3.5A1.5 1.5 0 0 1 2.5 2h2.764c.958 0 1.76.56 2.311 1.184C7.985 3.648 8.48 4 9 4h4.5A1.5 1.5 0 0 1 15 5.5v7a1.5 1.5 0 0 1-1.5 1.5h-11A1.5 1.5 0 0 1 1 12.5v-9z"/>
                    </svg>
                    <span>Êñ∞Âª∫Êñá‰ª∂Â§π</span>
                </button>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeNewSelectModal()">ÂèñÊ∂à</button>
            </div>
        </div>
    </div>

    <!-- Ê®°ÊÄÅÊ°Ü - Êñ∞Âª∫Êñá‰ª∂ -->
    <div id="newFileModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Êñ∞Âª∫Êñá‰ª∂</h3>
                <button class="close-btn" onclick="closeNewFileModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 12px;">
                    <label style="display: block; margin-bottom: 8px; font-size: 14px; color: var(--text-color);">Êñá‰ª∂Âêç</label>
                    <input type="text" id="fileNameInput" placeholder="ËØ∑ËæìÂÖ•Êñá‰ª∂ÂêçÔºà‰∏çÂê´Êâ©Â±ïÂêçÔºâ" class="input-text">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 8px; font-size: 14px; color: var(--text-color);">Êñá‰ª∂Á±ªÂûã</label>
                    <select id="fileExtensionSelect" class="input-text" style="cursor: pointer;">
                        <option value="md" selected>.md (Markdown)</option>
                        <option value="markdown">.markdown (Markdown)</option>
                        <option value="txt">.txt (ÊñáÊú¨)</option>
                    </select>
                </div>
                <p style="color: var(--text-secondary); font-size: 13px; margin-top: 12px;">
                    üí° ÊèêÁ§∫ÔºöÊñá‰ª∂ÂêçÊó†ÈúÄËæìÂÖ•Êâ©Â±ïÂêç
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeNewFileModal()">ÂèñÊ∂à</button>
                <button class="btn btn-primary" onclick="createFile()">ÂàõÂª∫</button>
            </div>
        </div>
    </div>

    <!-- Ê®°ÊÄÅÊ°Ü - Êñ∞Âª∫Êñá‰ª∂Â§π -->
    <div id="newFolderModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Êñ∞Âª∫Êñá‰ª∂Â§π</h3>
                <button class="close-btn" onclick="closeNewFolderModal()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="text" id="folderNameInput" placeholder="Êñá‰ª∂Â§πÂêçÁß∞" class="input-text">
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeNewFolderModal()">ÂèñÊ∂à</button>
                <button class="btn btn-primary" onclick="createFolder()">ÂàõÂª∫</button>
            </div>
        </div>
    </div>

    <!-- Ê®°ÊÄÅÊ°Ü - ÁßªÂä®Êñá‰ª∂/Êñá‰ª∂Â§π -->
    <div id="moveModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ÁßªÂä®Âà∞Êñá‰ª∂Â§π</h3>
                <button class="close-btn" onclick="closeMoveModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 16px; color: var(--text-secondary);">
                    Ê≠£Âú®ÁßªÂä®: <strong id="moveItemName"></strong>
                </p>
                <div class="folder-list" id="folderList">
                    <div class="loading">Âä†ËΩΩ‰∏≠...</div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeMoveModal()">ÂèñÊ∂à</button>
            </div>
        </div>
    </div>

    <!-- Ê®°ÊÄÅÊ°Ü - ÈáçÂëΩÂêçÊñá‰ª∂/Êñá‰ª∂Â§π -->
    <div id="renameModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ÈáçÂëΩÂêç</h3>
                <button class="close-btn" onclick="closeRenameModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 12px; color: var(--text-secondary);">
                    ÂéüÂêçÁß∞: <strong id="renameItemOldName"></strong>
                </p>
                <input type="text" id="renameInput" placeholder="ËæìÂÖ•Êñ∞ÂêçÁß∞" class="input-text">
                <p id="renameError" style="color: var(--danger-color); margin-top: 8px; font-size: 13px; display: none;"></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeRenameModal()">ÂèñÊ∂à</button>
                <button class="btn btn-primary" onclick="confirmRename()">Á°ÆÂÆö</button>
            </div>
        </div>
    </div>

    <!-- Âè≥ÈîÆËèúÂçï - LibraryÊñá‰ª∂/Êñá‰ª∂Â§π -->
    <div id="contextMenu" class="context-menu">
        <div class="context-menu-item" onclick="contextMenuAction('rename')">
            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                <path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"/>
            </svg>
            ÈáçÂëΩÂêç
        </div>
        <div class="context-menu-item" onclick="contextMenuAction('move')">
            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8.5 1.5A1.5 1.5 0 0 1 10 0h4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h4a1.5 1.5 0 0 1 1.5 1.5v7.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 9.293V1.5z"/>
            </svg>
            ÁßªÂä®Âà∞...
        </div>
        <div class="context-menu-item danger" onclick="contextMenuAction('delete')">
            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
            </svg>
            Âà†Èô§
        </div>
    </div>

    <!-- Âè≥ÈîÆËèúÂçï - È¢ÑËßàÂÜÖÂÆπÊñáÂ≠óÈÄâ‰∏≠ -->
    <div id="previewContextMenu" class="context-menu">
        <div class="context-menu-item" onclick="previewContextMenuAction('copy')">
            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
            </svg>
            Â§çÂà∂
        </div>
        <div class="context-menu-item" onclick="previewContextMenuAction('bing')">
            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"/>
            </svg>
            Áî®ÂøÖÂ∫îÊêúÁ¥¢
        </div>
        <div class="context-menu-item" onclick="previewContextMenuAction('findInSource')">
            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
            </svg>
            Âú®Ê∫ê‰ª£Á†Å‰∏≠ÊâæÂà∞
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
